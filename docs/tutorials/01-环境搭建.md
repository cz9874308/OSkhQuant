# 第 1 课：环境搭建

> ⏱ **课时**：30 分钟  
> 🎯 **学习目标**：完成 MiniQMT 和 OSkhQuant 的安装配置，成功建立连接  
> 📚 **难度**：⭐ 完全入门

---

## 📖 课程概览

在开始量化交易之前，我们需要先准备好"工具箱"。就像装修房子需要锤子、螺丝刀一样，量化交易也需要特定的软件工具。

本节课，你将学会：
- 安装 MiniQMT 客户端（数据来源）
- 配置 OSkhQuant 系统（我们的主角）
- 让两个软件"握手"成功

---

## 1.1 硬件与系统要求

### 操作系统

**必须是 Windows 10 或更高版本的 64 位系统**。

> 💡 **为什么只支持 Windows？**  
> OSkhQuant 依赖的 MiniQMT 客户端只在 Windows 上运行。如果你用的是 Mac 或 Linux，可以考虑安装虚拟机或双系统。

### 硬件建议

| 配置项 | 最低要求 | 推荐配置 |
|-------|---------|---------|
| CPU | 双核处理器 | Intel i5 / AMD R5 及以上 |
| 内存 | 8GB | 16GB |
| 硬盘 | 机械硬盘 | **固态硬盘 (SSD)** |

> 💡 **内存很重要**  
> 如果你的策略需要处理大量历史数据或者使用机器学习模型，16GB 内存会让你更舒服。

---

## 1.2 安装 MiniQMT 客户端

MiniQMT 是由券商提供的交易终端，OSkhQuant 通过它来获取股票行情数据。

### 第一步：开通 MiniQMT 账户

MiniQMT 不是随便就能用的，你需要在支持的券商开户。

> 🔗 **如果还没有 MiniQMT 账户**  
> 可以访问 [看海量化官网](https://khsci.com/khQuant/miniqmt/) 了解如何免费开通。

### 第二步：下载并安装

1. 从你的券商官网下载 MiniQMT 安装包
2. 双击安装，一路"下一步"即可
3. 记住你的 **安装路径**（后面要用！）

> 📍 **示例安装路径**  
> `D:\国金证券QMT交易端\`

### 第三步：登录测试

1. 打开 MiniQMT 客户端
2. 输入账号密码
3. **重要**：勾选 **"极简模式"**（有的券商叫"独立交易"）
4. 点击登录

登录成功后，你会看到一个简洁的界面。恭喜，第一步完成！

---

## 1.3 安装 OSkhQuant

有两种安装方式可选：

### 方式一：使用打包好的 EXE（推荐新手）

1. 访问 [OSkhQuant 官网](https://khsci.com/khQuant/)
2. 下载最新版安装包（解压密码在文件名中）
3. 解压后双击 `.exe` 文件
4. 选择安装路径，一直"下一步"
5. 勾选"创建桌面快捷方式"
6. 完成安装

> ⚠️ **Windows 安全提示**  
> 如果弹出"Windows 已保护你的电脑"，点击"更多信息" → "仍要运行"。

### 方式二：使用源代码（适合有 Python 基础的用户）

如果你想深入学习或修改代码，可以直接使用源码：

```bash
# 克隆仓库
git clone https://github.com/xxx/OSkhQuant.git

# 安装依赖
pip install -r requirements.txt

# 运行主程序
python GUIkhQuant.py
```

> 💡 **本教程默认使用 EXE 版本**  
> 后续的操作说明都基于安装好的软件进行。

---

## 1.4 配置 MiniQMT 路径

这是最关键的一步！OSkhQuant 需要知道 MiniQMT 装在哪里，才能和它"对话"。

### 打开设置对话框

1. 双击桌面的 OSkhQuant 快捷方式，启动软件
2. 在顶部工具栏找到 **设置** 按钮，点击打开

### 配置两个核心路径

在"软件设置"对话框中，找到 **客户端设置** 区域：

#### 路径 1：miniQMT客户端路径

**作用**：指向 MiniQMT 的主程序

**如何设置**：
1. 点击"浏览..."按钮
2. 找到你的 MiniQMT 安装目录
3. 进入 `bin.x64` 文件夹
4. 选择 `XtItClient.exe` 文件

> 📍 **示例**：`D:\国金证券QMT交易端\bin.x64\XtItClient.exe`

#### 路径 2：miniQMT路径

**作用**：指向 MiniQMT 的用户数据文件夹

**如何设置**：
1. 点击"浏览..."按钮
2. 找到 MiniQMT 安装目录下的 `userdata_mini` 文件夹
3. 选中该文件夹

> 📍 **示例**：`D:\国金证券QMT交易端\userdata_mini`

### 保存设置

配置完两个路径后，点击 **保存设置** 按钮。

```
✅ 检查清单：
□ 客户端路径指向 bin.x64\XtItClient.exe
□ 数据路径指向 userdata_mini 文件夹
□ 已点击"保存设置"
```

---

## 1.5 启动与连接

### 正确的启动顺序（很重要！）

```mermaid
graph LR
    A[1. 先启动 MiniQMT] --> B[2. 登录成功]
    B --> C[3. 再启动 OSkhQuant]
    C --> D[4. 检查连接状态]
```

> ⚠️ **顺序不能颠倒！**  
> OSkhQuant 是通过 MiniQMT 的接口获取数据的。如果 MiniQMT 没启动，OSkhQuant 就找不到"数据源"。

### Step 1：启动 MiniQMT

1. 打开 MiniQMT 客户端
2. 输入账号密码
3. 勾选"极简模式"
4. 登录成功

### Step 2：启动 OSkhQuant

1. 双击桌面快捷方式
2. 等待软件加载完成

### Step 3：检查连接状态

看软件右上角的 **MiniQMT状态指示灯**：

| 状态 | 含义 | 处理方法 |
|-----|-----|---------|
| 🟢 绿色 | 连接成功！ | 可以开始使用了 |
| 🔴 红色 | 连接失败 | 见下方排查步骤 |

### 连接失败怎么办？

如果指示灯是红色，请按以下顺序检查：

1. **MiniQMT 是否已登录？**  
   不是停留在登录界面，而是真正登录成功

2. **启动顺序对吗？**  
   必须先启动 MiniQMT，再启动 OSkhQuant

3. **路径配置正确吗？**  
   回到"设置" → "客户端设置"，仔细核对两个路径

4. **尝试重启**  
   关闭两个软件，按正确顺序重新启动

---

## 💡 实践任务

现在轮到你动手了！完成以下任务：

### 任务 1：安装软件
- [ ] 安装 MiniQMT 客户端
- [ ] 安装 OSkhQuant

### 任务 2：配置路径
- [ ] 打开 OSkhQuant 的"设置"
- [ ] 正确配置两个 MiniQMT 路径
- [ ] 保存设置

### 任务 3：建立连接
- [ ] 先启动并登录 MiniQMT（记得勾选极简模式）
- [ ] 再启动 OSkhQuant
- [ ] 确认右上角指示灯为 🟢 绿色

---

## 📚 常见问题

### Q1：找不到 bin.x64 文件夹？

**A**：不同券商的 MiniQMT 目录结构可能略有不同。如果找不到 `bin.x64`，试试在安装目录里搜索 `XtItClient.exe`。

### Q2：安装时提示需要 VC++ 运行库？

**A**：下载安装 [Microsoft Visual C++ Redistributable](https://aka.ms/vs/17/release/vc_redist.x64.exe)，然后重新安装 OSkhQuant。

### Q3：指示灯一直是红色？

**A**：
1. 确保 MiniQMT 已经登录（不是停在登录界面）
2. 确保勾选了"极简模式"
3. 关闭 OSkhQuant，重新按正确顺序启动

### Q4：路径里有中文可以吗？

**A**：可以，但建议使用纯英文路径，减少潜在的编码问题。

---

## 📌 核心要点总结

今天你学到了：

1. **系统要求**：Windows 10+，建议 16GB 内存和 SSD
2. **两个软件**：MiniQMT（数据源）+ OSkhQuant（主平台）
3. **关键配置**：必须正确设置两个 MiniQMT 路径
4. **启动顺序**：先 MiniQMT 后 OSkhQuant，顺序不能颠倒
5. **连接检查**：看右上角指示灯，🟢=成功，🔴=失败

---

## ➡️ 下一课预告

**第 2 课：初识界面** 🖥️

环境搭建完成，接下来我们要认识 OSkhQuant 的主界面。你将学会：
- 理解主界面的三栏布局
- 认识各个功能区域
- 掌握工具栏的常用操作

下一课见！👋
